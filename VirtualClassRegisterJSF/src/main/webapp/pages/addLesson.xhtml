<ui:composition
  template="/templates/page-template.xhtml"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="jakarta.faces.facelets"
  xmlns:h="jakarta.faces.html"
  xmlns:f="jakarta.faces.core"
  xmlns:p="http://primefaces.org/ui"
>
  <ui:define name="title">Virtual Class Register - #{textMain.add_lesson}</ui:define>

  <ui:define name="content">
    <p:panel styleClass="mb-4">
      <h:form id="form">
        <p:panelGrid columns="2" layout="grid">
          <p:outputLabel for="semester">#{textMain.semester}</p:outputLabel>
          <p:selectOneMenu
            id="semester"
            value="#{lessonBB.lesson.semester.idSemester}"
            required="true"
            requiredMessage="#{textValidation.semester_is_required}"
          >
            <f:selectItem itemLabel="#{textMain.select_semester}" itemValue="" />
            <f:selectItems
              value="#{semesterBB.list}"
              var="s"
              itemLabel="#{s.name} #{s.startDate} - #{s.endDate}"
              itemValue="#{s.idSemester}"
            />
          </p:selectOneMenu>

          <p:outputLabel for="class">#{textMain.class}</p:outputLabel>
          <p:selectOneMenu
            id="class"
            value="#{lessonBB.lesson.clazz.idClass}"
            required="true"
            requiredMessage="#{textValidation.class_is_required}"
          >
            <f:selectItem itemLabel="#{textMain.select_class}" itemValue="" />
            <f:selectItems
              value="#{classBB.list}"
              var="c"
              itemLabel="#{c.name}"
              itemValue="#{c.idClass}"
            />
          </p:selectOneMenu>

          <p:outputLabel for="subject">#{textMain.subject}</p:outputLabel>
          <p:selectOneMenu
            id="subject"
            value="#{lessonBB.lesson.teacherteachessubject.idTeacherTeachesSubject}"
            required="true"
            requiredMessage="#{textValidation.subject_is_required}"
          >
            <f:selectItem itemLabel="#{textMain.select_subject}" itemValue="" />
            <f:selectItems
              value="#{teacherteachessubjectBB.list}"
              var="t"
              itemLabel="#{t.subject.name} - #{t.user.forename} #{t.user.surname}"
              itemValue="#{t.idTeacherTeachesSubject}"
            />
          </p:selectOneMenu>

          <p:outputLabel for="day-of-the-week">#{textMain.day_of_the_week}</p:outputLabel>
          <p:selectOneMenu
            id="day-of-the-week"
            value="#{lessonBB.lesson.day}"
            required="true"
            requiredMessage="#{textValidation.day_is_required}"
          >
            <f:selectItem itemLabel="#{textMain.select_day_of_the_week}" itemValue="" />
            <f:selectItem itemLabel="#{textMain.monday}" itemValue="Poniedziałek" />
            <f:selectItem itemLabel="#{textMain.tuesday}" itemValue="Wtorek" />
            <f:selectItem itemLabel="#{textMain.wednesday}" itemValue="Środa" />
            <f:selectItem itemLabel="#{textMain.thursday}" itemValue="Czwartek" />
            <f:selectItem itemLabel="#{textMain.friday}" itemValue="Piątek" />
            <f:selectItem itemLabel="#{textMain.saturday}" itemValue="Sobota" />
            <f:selectItem itemLabel="#{textMain.sunday}" itemValue="Niedziela" />
          </p:selectOneMenu>

          <p:outputLabel for="start" value="#{textMain.start_time}" />
          <p:datePicker
            id="start"
            value="#{lessonBB.start}"
            timeOnly="true"
            pattern="HH:mm"
            required="true"
            requiredMessage="#{textValidation.start_time_is_required}"
          />

          <p:outputLabel for="end" value="#{textMain.end_time}" />
          <p:datePicker
            id="end"
            value="#{lessonBB.end}"
            timeOnly="true"
            pattern="HH:mm"
            required="true"
            requiredMessage="#{textValidation.end_time_is_required}"
          />
        </p:panelGrid>

        <p:commandButton
          styleClass="m-1"
          value="#{textMain.add_lesson}"
          action="#{lessonBB.addLesson()}"
          update="@form"
        />
        <p:linkButton
          styleClass="m-1"
          outcome="administrationPanel"
          value="#{textMain.go_back}"
        />

        <p:messages id="messages" />
      </h:form>
    </p:panel>
  </ui:define>
</ui:composition>
